<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Favicons -->
    <link href="../homepage final/assets2/images/appicon.png" rel="icon">
    <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <title>Nearby Supermarkets | EcoBites</title>
    <!-- Vendor CSS Files -->
    <link href="../homepage final/assets/vendor/animate.css/animate.min.css" rel="stylesheet">
    <link href="../homepage final/assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="../homepage final/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../homepage final/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="../homepage final/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
    <link href="../homepage final/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="../homepage final/assets/vendor/remixicon/remixicon.css" rel="stylesheet">
    <link href="../homepage final/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

    <!-- Bootstrap core CSS -->
    <link href="../homepage final/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


    <!-- Template Main CSS File -->
<!--     <link href="../homepage final/assets/css/style.css" rel="stylesheet"> -->

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="../homepage final/assets2/css/fontawesome.css">
    <link rel="stylesheet" href="../homepage final/assets2/css/templatemo-digimedia-v1.css">
    <link rel="stylesheet" href="../homepage final/assets2/css/animated.css">
    <link rel="stylesheet" href="../homepage final/assets2/css/owl.css">
    <!-- <link rel="stylesheet" href="quiz.css">
    <link rel="stylesheet" href="shop.css">
    <link rel="stylesheet" href="shopMap.css"> -->

    <!-- Firebase Scripts + Vue -->
    <script type="module" src="../firebaseNavBar.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDOfw5q-bAzWK-LZTFdVNR3K2ToMKN6tc&libraries=places,directions"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <!-- additional links -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
<!--

TemplateMo 568 DigiMedia

https://templatemo.com/tm-568-digimedia

-->
</head>

<body>

  <!-- ***** Preloader Start ***** -->
  <div id="js-preloader" class="js-preloader">
    <div class="preloader-inner">
      <span class="dot"></span>
      <div class="dots">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
  <!-- ***** Preloader End ***** -->

  <div class="pre-header">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-7 col-sm-7 col-6 d-flex justify-content-start">
              <!-- Dynamic Display 1 -->
              <div id="display">

              </div>
            </div>
            <div class="col-lg-5 col-sm-5 col-5 text-end d-flex justify-content-end align-items-center">
              <div class="dropdown d-flex">
                  <!-- Dynamic Display 2 -->
                  <div id="display2">

                  </div>
              </div>
          </div>
        </div>
    </div>
  </div>

  <!-- Pre-header End -->

  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky wow slideInDown" data-wow-duration="0.75s" data-wow-delay="0s">
    <div class="container">
      <div class="row">
        <div class="col-12 col-md-12">
          <nav class="main-nav">
            <!-- ***** Logo Start ***** -->
            <a href="../homepage final/index.html" class="logo">
              <img src="../images/ecobiteslogo.png" alt="" style="width: 150px;display:flex;justify-content:left;">
            </a>
            <!-- ***** Logo End ***** -->
            <!-- ***** Menu Start ***** -->
            <ul class="nav justify-content">
              <li class="scroll-to-section"><a href="../homepage final/index.html">Home</a></li>
              <li class="scroll-to-section"><a href="../meal_planning/choose.html" class="active">Meal Planning</a></li>
              <li class="scroll-to-section"><a href="../shop/shop.html">Shop</a></li>
              <!-- <li class="scroll-to-section"><a href="#contact">Contact</a></li>  -->
            </ul>        
            <a class='menu-trigger'>
                <span>Menu</span>
            </a>
            <!-- ***** Menu End ***** -->
          </nav>
        </div>
      </div>
    </div>
  </header>
  <!-- ***** Nav Bar Header Area End Here ***** -->

  <!-- banner start -->
  <div id="contact" class="services section">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="section-heading  wow fadeInDown" data-wow-duration="1s" data-wow-delay="0.5s">
           <h1>Nearby Supermarkets</h1>
           
          </div>
        </div>
        <div class="col-lg-12">
          <div class="naccs">
            <div class="grid">
              <div class="row">
                <div class="col-lg-12">
                  <div id="map" style="width: 100%; height: 400px;"></div>
                  <br>
                  <br>
                  <br>
                  <div class="menu">
                    <div class="first-thumb active">
                      <div class="thumb">
                        
                        <span class="icon"><img src="../images/shops_supermarket.png" alt="Alternate Text"></span>

                        Shops

              

                       
                      </div>
                    </div>
                    <div>
                      <div class="thumb">                 
                        
                        <span class="icon"><img src="../images/directions.png" alt="Alternate Text"></span>

                        Directions

                

                      </div>
                    </div>

                    
                    </div>
                  </div>
                </div> 
                <div class="col-lg-12">
                  <ul class="nacc">
                    <li class="active">
                      <div>
                        <div class="thumb">
                          <div class="row">
                            <div class="col-lg-12 align-self-center">
                              <div class="left-text">
                                <div id="supermarketList" class="justify-content-center m-5" >
                                  
                                </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div>
                        <div class="thumb">
                          <div class="row">
                            <div class="col-lg-12 align-self-center">
                              <div class="left-text">
                                <div id="directionsPanel" class="justify-content-center m-5">
                                  <div class="row">
                                  
                                      <strong>Estimated Time:</strong> <span id="duration"></span>
                                  
                                  </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </li>
                    
                  </ul>
                </div>          
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  <!-- banner end  -->

  <!-- shop layout -->
  
    

  <script>
    




</script>
<!-- googlemaps -->
<script>
   var directionsService = new google.maps.DirectionsService();
        var directionsDisplay = new google.maps.DirectionsRenderer({
            panel: document.getElementById('directionsPanel')
        });
        
        // Call the function to find nearby supermarkets
        findNearbySupermarkets(); 

        // Function to find nearby supermarkets
        function findNearbySupermarkets() {
            // Check if the Geolocation API is available
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    const location = new google.maps.LatLng(latitude, longitude);
                    const map = new google.maps.Map(document.getElementById('map'), {
                        center: location,
                        zoom: 15
                    });

                    directionsDisplay.setMap(map);

                    const request = {
                        location: location,
                        radius: 2000,
                        type: 'supermarket', // Specify the type for supermarkets
                        keyword: 'supermarket' // Use a keyword like 'supermarket' to find supermarkets
                    };

                    const service = new google.maps.places.PlacesService(map);
                    service.nearbySearch(request, function (results, status) {
                        if (status === google.maps.places.PlacesServiceStatus.OK) {
                            const supermarketList = document.getElementById('supermarketList');
                            for (let i = 0; i < results.length; i++) {
                                const place = results[i];
                                const marker = new google.maps.Marker({
                                    position: place.geometry.location,
                                    map: map,
                                    title: place.name
                                });

                                marker.addListener('click', function () {
                                    const infowindow = new google.maps.InfoWindow({
                                        content: place.name
                                    });
                                    infowindow.open(map, marker);

                                    // Provide directions when the supermarket is clicked
                                    calculateAndDisplayRoute(location, place.geometry.location);
                                });

                                // Add supermarket name and address to the list
                                const listItem = document.createElement('div');
                                listItem.innerHTML = `<strong>${place.name}</strong><br>${place.vicinity}<br><br>`;
                                supermarketList.appendChild(listItem);
                            }
                        }
                    });
                });
            } else {
                alert("Geolocation is not available in your browser.");
            }
        }

        // Function to calculate and display route and instructions
        function calculateAndDisplayRoute(origin, destination) {
            directionsService.route({
                origin: origin,
                destination: destination,
                travelMode: google.maps.TravelMode.DRIVING
            }, function (response, status) {
                if (status === 'OK') {
                    directionsDisplay.setDirections(response);

                    // Display the estimated time
                    const route = response.routes[0];
                    const leg = route.legs[0];
                    const duration = leg.duration.text;
                    document.getElementById('duration').textContent = duration;
                } else {
                    window.alert('Directions request failed due to ' + status);
                }
            });
        }
</script>
<!-- Vendor JS Files -->
<script src="../homepage final/assets/vendor/aos/aos.js"></script>
<script src="../homepage final/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../homepage final/assets/vendor/glightbox/js/glightbox.min.js"></script>
<script src="../homepage final/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<script src="../homepage final/assets/vendor/swiper/swiper-bundle.min.js"></script>
<script src="../homepage final/assets/vendor/php-email-form/validate.js"></script>

<!-- Scripts -->
<script src="../homepage final/vendor2/jquery/jquery.min.js"></script>
<script src="../homepage final/vendor2/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../homepage final/assets2/js/owl-carousel.js"></script>
<script src="../homepage final/assets2/js/animation.js"></script>
<script src="../homepage final/assets2/js/imagesloaded.js"></script>
<script src="../homepage final/assets2/js/custom.js"></script>

<!-- js script -->


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
</body>

</html>